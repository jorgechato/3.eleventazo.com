(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{250:function(e,t,r){var content=r(278);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(62).default)("68b64f3e",content,!0,{sourceMap:!1})},277:function(e,t,r){"use strict";r(250)},278:function(e,t,r){var o=r(61)(!1);o.push([e.i,"h2{color:var(--silver);font-size:1.7em}.small{font-size:.7em}.error{color:red}input,select{border-color:var(--color);color:var(--color);text-align:center;-webkit-text-align:center;-moz-text-align:center;-ms-text-align:center;text-align-last:center;-webkit-text-align-last:center;-moz-text-align-last:center;-ms-text-align-last:center}button,input,select{width:90%}input,select{margin-top:.5em;margin-bottom:.5em}button,input,select{padding-left:0;padding-right:0}input:disabled{border-color:var(--accent-color);background:var(--accent-color);color:var(--bg);opacity:.5;margin-bottom:2em}button{margin-top:2em}form{width:100%}::-moz-placeholder{color:var(--color);opacity:1}:-ms-input-placeholder{opacity:1}::placeholder{color:var(--color);opacity:1}:-ms-input-placeholder{color:var(--color)}::-ms-input-placeholder{color:var(--color)}a:hover,button:hover{color:var(--bg);background-color:var(--accent-color)}",""]),e.exports=o},285:function(e,t,r){"use strict";r.r(t);var o,n=r(2),l=(r(20),r(38),r(19),r(115)),c=new Uint8Array(16);function d(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(c)}var v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var m=function(e){return"string"==typeof e&&v.test(e)},f=[],_=0;_<256;++_)f.push((_+256).toString(16).substr(1));var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(f[e[t+0]]+f[e[t+1]]+f[e[t+2]]+f[e[t+3]]+"-"+f[e[t+4]]+f[e[t+5]]+"-"+f[e[t+6]]+f[e[t+7]]+"-"+f[e[t+8]]+f[e[t+9]]+"-"+f[e[t+10]]+f[e[t+11]]+f[e[t+12]]+f[e[t+13]]+f[e[t+14]]+f[e[t+15]]).toLowerCase();if(!m(r))throw TypeError("Stringified UUID is invalid");return r};var y=function(e,t,r){var o=(e=e||{}).random||(e.rng||d)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=o[i];return t}return h(o)},D={middleware:["guest","invited"],components:{ValidationProvider:l.b,ValidationObserver:l.a},data:function(){return{userData:{name:"",surname:"",invitedBy:"",ticket:"",covid:"",invites:0,inviteCode:"",status:"p",admin:!1},ticket:[{key:"event",value:"Evento"},{key:"food-event",value:"Comida + Evento"}],covid:[{key:"1-shot",value:"1 Dosis"},{key:"vaccinated",value:"Vacunado"},{key:"pcr",value:"PCR < 7 días"},{key:"recovered",value:"Recuperado del COVID"},{key:"other",value:"Otros"}]}},created:function(){this.userData.invitedBy=this.$route.query.code;for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=0;i<7;i++)this.userData.inviteCode+=e.charAt(Math.floor(Math.random()*e.length))},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,o,n,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.app,o=null,t.prev=2,t.next=5,r.$fire.firestore.collection("event").doc("3").get();case 5:n=t.sent,l=n.data(),o=new Date(1e3*l.date.seconds),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:return t.abrupt("return",{date:o});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()},methods:{onSubmit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate().then((function(t){t&&e.$fire.firestore.collection("users").where("inviteCode","==",e.userData.invitedBy).get().then((function(t){0==t.size&&(alert("El enlace ha caducado, es incorrecto, pide a tu amig@ que hable con los admins"),e.$router.push("/")),t.forEach((function(t){var r=t.data(),o=t.id;if(r.invites>0){e.userData.invitedBy=r.name+" "+r.surname;var n=e.userData.name+"_"+e.userData.surname+"-"+y();e.$fire.firestore.collection("users").doc(n).set(e.userData).then((function(t){e.$storage.setUniversal("token",n),e.$fire.firestore.collection("users").doc(o).set({invites:r.invites-1},{merge:!0}).then((function(){e.$router.push("/info")}))}))}else alert("Tú amig@ ya no puede invitar a nadie más.")}))}))}));case 1:case"end":return t.stop()}}),t)})))()}}},k=(r(277),r(42)),component=Object(k.a)(D,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[e._m(0),e._v(" "),r("h2",[e._v("\n    "+e._s(e.date.getDate())+" "+e._s(e.date.getMonth()+1)+" "+e._s(e.date.getFullYear())+"\n    "),r("span",{staticClass:"shade"},[e._v(" ")])]),e._v(" "),r("ValidationObserver",{ref:"form"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.invitedBy,expression:"userData.invitedBy"}],attrs:{name:"invitedBy",disabled:!0},domProps:{value:e.userData.invitedBy},on:{input:function(t){t.target.composing||e.$set(e.userData,"invitedBy",t.target.value)}}}),e._v(" "),r("div",{staticClass:"small error"},[e._v(e._s(o[0]))])]}}])}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.name,expression:"userData.name"}],attrs:{type:"text",placeholder:"Nombre"},domProps:{value:e.userData.name},on:{input:[function(t){t.target.composing||e.$set(e.userData,"name",t.target.value)},function(t){e.userData.name=t.target.value.toUpperCase()}]}}),e._v(" "),r("div",{staticClass:"small error"},[e._v(e._s(o[0]))])]}}])}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.surname,expression:"userData.surname"}],attrs:{type:"text",placeholder:"Apellido"},domProps:{value:e.userData.surname},on:{input:[function(t){t.target.composing||e.$set(e.userData,"surname",t.target.value)},function(t){e.userData.surname=t.target.value.toUpperCase()}]}}),e._v(" "),r("div",{staticClass:"small error"},[e._v(e._s(o[0]))])]}}])}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("select",{directives:[{name:"model",rawName:"v-model",value:e.userData.ticket,expression:"userData.ticket"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.userData,"ticket",t.target.multiple?r:r[0])}}},[r("option",{staticClass:"disable",attrs:{selected:"",disabled:"",value:""}},[e._v("Elige el bono")]),e._v(" "),e._l(e.ticket,(function(option){return r("option",{domProps:{value:option.key}},[e._v("\n      "+e._s(option.value)+"\n      ")])}))],2),e._v(" "),r("div",{staticClass:"small error"},[e._v(e._s(o[0]))]),e._v(" "),r("div",{staticClass:"small info"},[e._v("*El bono seleccionado puede ser modificado por los admins")]),e._v(" "),r("div",{staticClass:"small info"},[e._v("**El precio del bote será porporcionál al bono seleccionado")])]}}])}),e._v(" "),r("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[r("select",{directives:[{name:"model",rawName:"v-model",value:e.userData.covid,expression:"userData.covid"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.userData,"covid",t.target.multiple?r:r[0])}}},[r("option",{staticClass:"disable",attrs:{selected:"",disabled:"",value:""}},[e._v("Información COVID")]),e._v(" "),e._l(e.covid,(function(option){return r("option",{domProps:{value:option.key}},[e._v("\n      "+e._s(option.value)+"\n      ")])}))],2),e._v(" "),r("div",{staticClass:"small error"},[e._v(e._s(o[0]))])]}}])}),e._v(" "),r("button",{attrs:{type:"submit"}},[e._v("Guardar")])],1)])],1)}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[e._v("\n    DatoS\n    "),r("span",{staticClass:"shade"},[e._v(" ")]),e._v(" "),r("span",{staticClass:"small"},[e._v("de la")]),e._v(" "),r("span",{staticClass:"shade"},[e._v(" ")]),e._v("\n    InvitacioN\n    "),r("span",{staticClass:"shade"},[e._v(" ")])])}],!1,null,null,null);t.default=component.exports}}]);